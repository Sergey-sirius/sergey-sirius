<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Глава 31. Логическая репликация &#8211; Sirius Blog</title>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-130427752-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-130427752-1');
</script>

</head>
<meta name="description" content="">
<meta name="keywords" content="PostgreSQL, PostgreSQL_Book_11">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:4000/images/abstract-11.jpg">

<meta name="twitter:title" content="Глава 31. Логическая репликация">
<meta name="twitter:description" content="">
<meta name="twitter:creator" content="@2hotab2">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Глава 31. Логическая репликация">
<meta property="og:description" content="">
<meta property="og:url" content="http://localhost:4000/PostgreSQL-V11_Doc-031/">
<meta property="og:site_name" content="Sirius Blog">





<link rel="canonical" href="http://localhost:4000/PostgreSQL-V11_Doc-031/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Sirius Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.jpg">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.jpg">
<!-- 114x72 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x72" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.jpg">
<!-- 144x72 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x72" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.jpg">



</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://localhost:4000/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://localhost:4000/images/avatar.jpg" alt="Sergey Khatsiola photo" class="author-photo">
					<h4>Sergey Khatsiola</h4>
					<p>Кратко обо мне ...</p>
				</li>
				<li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:2hotab2@gmail.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/2hotab2"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/sergej.ha1"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="https://github.com/Sergey-sirius"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://localhost:4000/posts/">All Posts</a></li>
				<li><a href="http://localhost:4000/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="http://localhost:4000/handbook/" >HandBook</a></li>
	  
	    
	    <li><a href="https://github.com/Sergey-sirius" target="_blank">Main Link</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div class="entry-header">
  
  <div class="entry-image">
    <img src="http://localhost:4000/images/abstract-11.jpg" alt="Глава 31. Логическая репликация">
  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->


<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://localhost:4000/PostgreSQL-V11_Doc-031/" rel="bookmark" title="Глава 31. Логическая репликация">Глава 31. Логическая репликация</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2018-12-01T00:00:00+02:00">December 01, 2018</time></span></h2>
        
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
Reading time ~12 minutes
        </p><!-- /.entry-reading-time -->
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Глава 31. Логическая репликация</p>

<p>Логическая репликация — это метод репликации объектов данных и изменений в них, использу-
ющий репликационные идентификаторы (обычно это первичный ключ). Мы называем такую ре-
пликацию «логической», в отличие от физической, которая построена на точных адресах блоков
и побайтовом копировании. PostgreSQL поддерживает оба механизма одновременно; см. Главу 26.
Логическая репликация позволяет более детально управлять репликацией данных и аспектами
безопасности.
В логической репликации используется модель публикаций/подписок с одним или несколькими
подписчиками, которые подписываются на одну или несколько публикаций на публикующем узле.
Подписчики получают данные из публикаций, на которые они подписаны, и могут затем повторно
опубликовать данные для организации каскадной репликации или более сложных конфигураций.
Логическая репликация таблицы обычно начинается с создания снимка данных в публикуемой
базе данных и копирования её подписчику. После этого изменения на стороне публикации пере-
даются подписчику в реальном времени, когда они происходят. Подписчик применяет изменения
в том же порядке, что и узел публикации, так что для публикаций в рамках одной подписки гаран-
тируется транзакционная целостность. Этот метод репликации данных иногда называется тран-
закционной репликацией.
Типичные сценарии использования логической репликации:
• Передача подписчикам инкрементальных изменений в одной базе данных или подмножестве
базы данных, когда они происходят.
• Срабатывание триггеров для отдельных изменений, когда их получает подписчик.
• Объединение нескольких баз данных в одну (например, для целей анализа).
• Репликация между разными основными версиями PostgreSQL.
• Репликация между экземплярами PostgreSQL на разных платформах (например, с Linux на
Windows)
• Предоставление доступа к реплицированным данным другим группам пользователей.
• Разделение подмножества базы данных между несколькими базами данных.
База данных подписчика функционирует так же, как и любой другой экземпляр базы PostgreSQL,
и может стать публикующей, если создать публикации в ней. Когда подписчик действует как ис-
ключительно читающее приложение, никаких конфликтов с одной подпиской не будет. Но они мо-
гут возникнуть, если в тот же набор таблиц производят запись какие-либо приложения или другие
подписчики.
31.1. Публикация
Публикация может быть определена на любом ведущем сервере физической репликации. Сервер,
на котором определяется публикация, называется публикующим. Публикация — это набор изме-
нений, выделяемых в таблице или в группе таблиц (он также может называться набором реплика-
ции). Публикация существует только в одной базе данных.
Публикации отличаются от схем и они никак не влияют на доступ к таблице. Если требуется, каж-
дую таблицу можно включить в несколько публикаций. В настоящее время публикации могут со-
держать только таблицы. Объекты в них нужно добавлять явным образом, если только публикация
не создана для всех таблиц (с указанием ALL TABLES).
Публикации могут ограничивать набор публикуемых изменений, выбирая любое сочетание опе-
раций из INSERT, UPDATE, DELETE и TRUNCATE, подобно тому как для разных типов событий могут
срабатывать триггеры. По умолчанию реплицируются все типы операций.
736Логическая репликация
Чтобы можно было реплицировать операции UPDATE и DELETE, в публикуемой таблице должен быть
настроен «репликационный идентификатор» для нахождения соответствующих строк для измене-
ния или удаления на стороне подписчика. По умолчанию это первичный ключ, если он создан.
Также репликационным идентификатором можно назначить другой уникальный индекс (с неко-
торыми дополнительными условиями). Если в таблице нет подходящего ключа, в качестве репли-
кационного идентификатора можно задать «full», что будет означать, что ключом будет вся стро-
ка. Это, однако, очень неэффективно и должно применяться как крайняя мера, если другого ре-
шения нет. Если на стороне публикации выбран репликационный идентификатор, отличный от
«full», то идентификатор, состоящий из того же или меньшего количества столбцов, также должен
быть определён на стороне подписчика. Подробнее о назначении репликационного идентифика-
тора рассказывается в REPLICA IDENTITY. Если в публикацию, в которой реплицируются операции
UPDATE и DELETE, добавляется таблица без репликационного идентификатора, то последующие ко-
манды UPDATE и DELETE на стороне публикации вызовут ошибку. Команды INSERT могут выполнять-
ся вне зависимости от такого идентификатора.
У каждой публикации может быть множество подписчиков.
Публикация создаётся командой CREATE PUBLICATION и может быть впоследствии изменена или
удалена с помощью соответствующих команд.
В публикации можно динамически добавлять или удалять отдельные таблицы, используя команду
ALTER PUBLICATION. Операции ADD TABLE и DROP TABLE являются транзакционными, так что ре-
пликация таблицы будет начата или закончена с определённым снимком только после фиксации
транзакции.
31.2. Подписка
Подписка — это принимающая сторона логической репликации. Узел, на котором определяется
подписка, называется подписчиком. В свойствах подписки определяется подключение к другой
базе данных и набор публикаций (из одной или нескольких), на которые подписчик хочет подпи-
саться.
База данных подписчика работает так же, как и экземпляр любой другой базы PostgreSQL, и может
быть публикующей для других баз, если в ней определены собственные подписки.
Узел подписчика может подписываться на несколько подписок, если требуется. В одной паре пуб-
ликующий сервер/подписчик могут быть определены несколько подписок, но при этом нужно по-
заботиться о том, чтобы публикуемые объекты в разных подписках не перекрывались.
Изменения в каждой подписке будут приходить через один слот репликации (см. Подраз-
дел 26.2.6). Дополнительные слоты репликации могут потребоваться для начальной синхрониза-
ции уже существующих данных таблиц.
Подписка логической репликации может представлять собой ведомый узел для синхронной ре-
пликации (см. Подраздел 26.2.8). В этом случае именем ведомого узла по умолчанию будет имя
подписки. Другое имя можно задать в свойстве application_name в строке подключения для дан-
ной подписки.
Подписки могут быть выгружены командой pg_dump, если её выполняет суперпользователь. В про-
тивном случае выдаётся предупреждение и подписки пропускаются, так как обычным пользова-
телям не разрешено читать всю информацию о подписках из каталога pg_subscription.
Подписки добавляются командой CREATE SUBSCRIPTION и могут быть остановлены/возобнов-
лены в любой момент командой ALTER SUBSCRIPTION, а также удалены командой DROP
SUBSCRIPTION.
Когда подписка удаляется и пересоздаётся, информация о синхронизации теряется. Это означает,
что после этого данные необходимо синхронизировать заново.
737Логическая репликация
Определения схемы не реплицируются, а публикуемые таблицы должны существовать в базе под-
писчика. Объектами репликации могут быть только обычные таблицы. Так, например, нельзя про-
извести репликацию в представление.
Таблицы публикации сопоставляются с таблицами подписчика по полностью заданным именам
таблиц. Репликация в таблицы с другими именами на стороне подписчика не поддерживается.
Столбцы таблиц также сопоставляются по именам. Другой порядок столбцов в целевой таблице
допускается, но типы столбцов должны совпадать. Целевая таблица может содержать дополни-
тельные столбцы, отсутствующие в публикуемой таблице. Они будут заполнены установленными
для них значениями по умолчанию.
31.2.1. Управление слотами репликации
Как было сказано ранее, каждая (активная) подписка получает изменения из слота репликации
на удалённой стороне (стороне публикации). Обычно удалённый слот репликации создаётся ав-
томатически, когда подписка создаётся командой CREATE SUBSCRIPTION, и удаляется автоматиче-
ски, когда она удаляется командой DROP SUBSCRIPTION. Однако в некоторых ситуациях может быть
полезно или необходимо манипулировать подпиской и нижележащим слотом по отдельности. На-
пример, возможны такие сценарии:
• При создании подписки слот репликации может уже существовать. В этом случае подписку
можно создать с параметром create_slot = false, чтобы она была связана с существующим
слотом.
• Про создании подписки удалённый узел может быть недоступен или находиться в нерабочем
состоянии. В этом случае подписку можно создать с указанием connect = false. При этом
подключение к удалённому узлу не будет устанавливаться. Этот вариант использует pg_dump.
Чтобы активировать такую подписку впоследствии, удалённый слот репликации нужно будет
создать вручную.
• При ликвидации публикации может потребоваться сохранить слот репликации. Например,
это полезно, когда нужно перенести базу данных подписчика на другой узел и активиро-
вать её там. В этом случае разорвите связь подписки со слотом, используя команду ALTER
SUBSCRIPTION, прежде чем удалять подписку.
• При ликвидации подписки удалённый узел может быть недоступен. В этом случае разорви-
те связь подписки со слотом, используя команду ALTER SUBSCRIPTION, прежде чем пытаться
удалять подписку. Если удалённый экземпляр базы данных прекратил существование, больше
никакие действия не требуются. Если же экземпляр удалённой базы данных просто оказался
недоступным, слот репликации нужно будет удалить вручную; в противном случае публикую-
щий сервер продолжит сохранять WAL и может в конце концов заполнить всё место на диске.
Такие случаи заслуживают самого серьёзного разбирательства.
31.3. Конфликты
Логическая репликация работает подобно обычным операциям DML в том смысле, что данные
будут изменены, даже если они независимо изменялись на стороне подписчика. Если входящие
данные нарушат какие-либо ограничения, репликация остановится. Эта ситуация называется кон-
фликтом. При репликации операций UPDATE или DELETE отсутствие данных не вызывает конфлик-
та, так что такие операции просто пропускаются.
В случае конфликта выдаётся ошибка и репликация останавливается; разрешить возникшую про-
блему пользователь должен вручную. Подробности конфликта можно найти в журнале серве-
ра-подписчика.
Разрешение может заключаться либо в изменении данных на стороне подписчика, что-
бы они не конфликтовали с приходящим изменением, либо в пропуске транзакции, кон-
фликтующей с существующими данными. Пропустить транзакцию можно, вызвав функцию
pg_replication_origin_advance(), которой передаётся в node_name соответствующее имя подпис-
738Логическая репликация
ки, а также позиция. Текущие позиции источников можно увидеть в системном представлении
pg_replication_origin_status.
31.4. Ограничения
Логическая репликация в настоящее время имеет ограничения и недостатки, описанные ниже.
Они могут быть устранены в будущих выпусках.
• Схема базы данных и команды DDL не реплицируются. Изначальную схему можно скопиро-
вать, воспользовавшись командой pg_dump –schema-only. Последующие изменения схемы
необходимо будет синхронизировать вручную. (Заметьте, однако, что схемы не обязательно
должны быть абсолютно идентичными на обеих сторонах репликации.) Если определения схе-
мы в исходной базе данных меняются, логическая репликация работает надёжно — когда дан-
ные после изменения схемы прибывают на сторону подписчика, но не вписываются в схему
его таблиц, выдаётся ошибка, требующая обновления схемы. Во многих случаях возникнове-
ние таких ошибок можно предупредить, сначала применяя дополняющие изменения на под-
писчике.
• Данные последовательностей не реплицируются. Данные в столбцах serial или столбцах иден-
тификации, выдаваемые последовательностями, конечно, будут реплицированы в составе таб-
лицы, но сама последовательность на подписчике будет сохранять стартовое значение. Ес-
ли подписчик используется в качестве базы только для чтения, обычно это не является про-
блемой. Если же, однако, предусматривается возможность переключения на базу подписчика
некоторым образом, текущие значения в этих последовательностях нужно будет обновить, ли-
бо скопировав текущие данные из базы публикации (вероятно, с применением pg_dump), либо
выбрав достаточно большие значения из самих таблиц.
• Репликация команд TRUNCATE поддерживается, но опустошение групп таблиц, соединённых
внешними ключами, стоит выполнять с осторожностью. При репликации действия TRUNCATE
подписчик опустошит ту же группу таблиц, которая была опустошена на публикующем сер-
вере (явным образом или в результате CASCADE), исключая таблицы, не входящие в подписку.
Данная операция завершится корректно, если все затронутые таблицы включены в одну и ту
же подписку. Если же некоторые таблицы, подлежащие опустошению на подписчике, связа-
ны по внешнему ключу с таблицами, не входящими в данную подписку, операция опустоше-
ния на сервере-подписчике завершится ошибкой.
• Большие объекты (см. Главу 35) не реплицируются. Это ограничение нельзя обойти никак,
кроме как хранить данные в обычных таблицах.
• Реплицировать данные возможно только из базовых таблиц в базовые таблицы. То есть табли-
цы на стороне публикации и на стороне подписки должны быть обычными, а не представлени-
ями, мат. представлениями, секционированными или сторонними таблицами. Это означает,
что вы можете реплицировать секции одну в одну, но реплицировать данные в таблицы, сек-
ционированные по-другому, нельзя. При попытке реплицировать таблицы, отличные от базо-
вых, будет выдана ошибка.
31.5. Архитектура
Логическая репликация начинается с копирования снимка данных в базе данных публикации. По
завершении этой операции изменения на стороне публикации передаются подписчику в реальном
времени, когда они происходят. Подписчик применяет изменения в том же порядке, в каком они
вносятся на узле публикации, так что для публикаций в рамках одной подписки гарантируется
транзакционная целостность.
Логическая репликация построена по схеме, подобной физической потоковой репликации (см.
Подраздел 26.2.5). Она реализуется процессами «walsender» (передачи WAL) и «apply» (примене-
ния). Процесс walsender запускает логическое декодирование (описанное в Главе 49) WAL и за-
гружает стандартный модуль логического декодирования (pgoutput). Этот модуль преобразует из-
менения, считываемые из WAL, в протокол логической репликации (см. Раздел 53.5) и отфильтро-
вывает данные согласно спецификации публикации. Затем данные последовательно передаются
739Логическая репликация
по протоколу логической репликации рабочему процессу применения изменений, который сопо-
ставляет данные с логическими таблицами и применяет отдельные изменения по мере их поступ-
ления, сохраняя транзакционный порядок.
Процесс применения изменений в базе данных подписчика всегда выполняется со значением
session_replication_role, равным replica, что влечёт соответствующие эффекты для триггеров
и ограничений.
Процесс применения логической репликации в настоящее время вызывает только триггеры уровня
строк, но не триггеры операторов. Однако начальная синхронизация таблицы реализована как
команда COPY и поэтому вызывает триггеры для INSERT и уровня строк, и уровня оператора.
31.5.1. Начальный снимок
Начальные данные существующих таблиц в подписке помещаются в снимок и копируются в парал-
лельном экземпляре процесса применения особого вида. Этот процесс создаёт собственный слот
репликации и производит копирование существующих данных. Когда существующие данные будут
скопированы, этот рабочий процесс переходит в режим синхронизации, в котором таблица при-
водится в синхронизированное состояние для основного процесса применения, то есть передаёт
все изменения, произошедшие во время начального копирования данных, используя стандартную
логическую репликацию. По завершении синхронизации управление репликацией этой таблицы
возвращается главному процессу, который продолжает репликацию в обычном режиме.
31.6. Мониторинг
Так как логическая репликация построена по схеме, подобной физической потоковой репликации,
мониторинг публикующего узла подобен мониторингу ведущего сервера при физической репли-
кации (см. Подраздел 26.2.5.2).
Информацию
о
подписке
для
мониторинга
можно
получить
в
представлении
pg_stat_subscription. Это представление содержит по одной строке для каждого рабочего про-
цесса подписчика. В зависимости от состояния подписки, с ней может быть связано ноль или бо-
лее активных рабочих процессов.
Обычно для включённой подписки работает только один процесс применения. Для отключённой
или нарушенной подписки это представление будет содержать ноль строк. Если выполняется на-
чальная синхронизация данных для каких-либо таблиц, для этих таблиц будут показаны дополни-
тельные рабочие процессы, производящие синхронизацию.
31.7. Безопасность
Роль, используемая для подключения репликации, должна иметь атрибут REPLICATION (или быть
суперпользователем). Доступ для этой роли должен быть настроен в pg_hba.conf, и эта роль также
должна иметь атрибут LOGIN.
Чтобы иметь возможность скопировать исходные данные таблицы, роль, используемая для соеди-
нения репликации, должна иметь право SELECT в публикуемой таблице (или быть суперпользова-
телем).
Чтобы создать публикацию, пользователь должен иметь право CREATE в базе данных.
Чтобы добавлять таблицы в публикацию, пользователь должен иметь права владельца для этих
таблиц. Создавать публикации, публикующие все таблицы автоматически, разрешено только су-
перпользователям.
Создавать подписки разрешено только суперпользователям.
Процесс применения изменений подписки будет выполняться в локальной базе с правами супер-
пользователя.
740Логическая репликация
Права проверяются только один раз при установлении подключения для репликации. Они не пе-
репроверяются при чтении каждой записи изменения с публикующего сервера и не перепроверя-
ются при применении каждого изменения.
31.8. Параметры конфигурации
Для осуществления логической репликации необходимо установить несколько параметров конфи-
гурации.
На публикующем сервере параметр wal_level должен иметь значение logical, а в
max_replication_slots должно быть задано число не меньше ожидаемого числа подписчиков
плюс некоторый резерв для синхронизации таблиц. А в max_wal_senders должно быть значение
как минимум равное max_replication_slots плюс число возможных физических реплик, работа-
ющих одновременно.
Также на стороне подписчика необходимо установить параметр max_replication_slots. В дан-
ном случае он должен быть не меньше числа подписок, на которые будет подписываться данный
подписчик. В max_logical_replication_workers необходимо установить минимум число подписок
плюс некоторый резерв для синхронизации таблиц. Кроме того, может потребоваться изменить
max_worker_processes, чтобы это число включало дополнительные рабочие процессы для репли-
кации (как минимум max_logical_replication_workers + 1). Заметьте, что некоторые расширения
и параллельные запросы также занимают слоты из числа max_worker_processes.
31.9. Быстрая настройка
Сначала установите параметры конфигурации в postgresql.conf:
wal_level = logical
Другие необходимые параметры по умолчанию имеют значения, подходящие для базовой настрой-
ки.
В файл pg_hba.conf необходимо внести изменения, чтобы разрешить репликацию (конкретные
значения будут зависеть от фактической конфигурации сети и имени пользователя, с которым вы
будете подключаться):
host
all
repuser
0.0.0.0/0
md5
Затем в базе данных публикации выполните:
CREATE PUBLICATION mypub FOR TABLE users, departments;
И в базе данных подписчика:
CREATE SUBSCRIPTION mysub CONNECTION ‘dbname=foo host=bar user=repuser’ PUBLICATION
mypub;
Показанная выше команда запустит процесс репликации, который вначале синхронизирует исход-
ное содержимого таблиц users и departments, а затем начнёт перенос инкрементальных измене-
ний в этих таблицах.
741</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://localhost:4000/tags/#PostgreSQL" title="Pages tagged PostgreSQL" class="tag"><span class="term">PostgreSQL</span></a><a href="http://localhost:4000/tags/#PostgreSQL_Book_11" title="Pages tagged PostgreSQL_Book_11" class="tag"><span class="term">PostgreSQL_Book_11</span></a></span>
        <span>Updated on <span class="entry-date date updated"><time datetime="2018-12-03 T15:14:43-04:00">December 03, 2018</time></span></span>
        <span class="author vcard"><span class="fn">Sergey Khatsiola</span></span>
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/PostgreSQL-V11_Doc-031/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://localhost:4000/PostgreSQL-V11_Doc-031/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=http://localhost:4000/PostgreSQL-V11_Doc-031/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="http://localhost:4000/PostgreSQL-V11_Doc-030/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="http://localhost:4000/Mount_new_HardDisk/" title="Монтирование новых жестких дисков в системе Ubuntu">Монтирование новых жестких дисков в системе Ubuntu</a></h3>
      <p>Подключаем новые диски в систему Ubuntu <a href="http://localhost:4000/Mount_new_HardDisk/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="http://localhost:4000/Installed_Docker_Ubuntu/" title="Установка Docker">Установка Docker</a></h4>
        <span>Published on January 20, 2019</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="http://localhost:4000/Entered_in_to_Docker/" title="Как Войти В Docker-Контейнер">Как Войти В Docker-Контейнер</a></h4>
        <span>Published on January 20, 2019</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2019 Sergey Khatsiola. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-130427752-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


	        

</body>
</html>
