<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Последние посты &#8211; Sirius Blog</title>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-130427752-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-130427752-1');
</script>

</head>
<meta name="description" content="Describtion ..">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:4000/images/abstract-1.jpg">

<meta name="twitter:title" content="Последние посты">
<meta name="twitter:description" content="Describtion ..">
<meta name="twitter:creator" content="@2hotab2">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Последние посты">
<meta property="og:description" content="Describtion ..">
<meta property="og:url" content="http://localhost:4000/page27/">
<meta property="og:site_name" content="Sirius Blog">





<link rel="canonical" href="http://localhost:4000/page27/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Sirius Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.jpg">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.jpg">
<!-- 114x72 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x72" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.jpg">
<!-- 144x72 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x72" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.jpg">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://localhost:4000/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://localhost:4000/images/avatar.jpg" alt="Sergey Khatsiola photo" class="author-photo">
					<h4>Sergey Khatsiola</h4>
					<p>Кратко обо мне ...</p>
				</li>
				<li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:2hotab2@gmail.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/2hotab2"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/sergej.ha1"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="https://github.com/Sergey-sirius"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://localhost:4000/posts/">All Posts</a></li>
				<li><a href="http://localhost:4000/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="http://localhost:4000/handbook/" >HandBook</a></li>
	  
	    
	    <li><a href="https://github.com/Sergey-sirius" target="_blank">Main Link</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="http://localhost:4000/images/abstract-1.jpg" alt="Последние посты">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Sirius Blog</h1>
      <h2>Последние посты</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="http://localhost:4000/PostgreSQL-V11_Doc-001/" title="Глава 1. Начало"><img src="http://localhost:4000/images/abstract-11.jpg" alt="Глава 1. Начало"></a>
      </div><!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2018-12-01T00:00:00+02:00"><a href="http://localhost:4000/PostgreSQL-V11_Doc-001/">December 01, 2018</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Sergey Khatsiola">Sergey Khatsiola</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~7 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/PostgreSQL-V11_Doc-001/" rel="bookmark" title="Глава 1. Начало" itemprop="url">Глава 1. Начало</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Глава 1. Начало</p>

<p>1.1. Установка</p>

<p>Прежде чем вы сможете использовать PostgreSQL, вы конечно должны его установить. Однако
возможно, что PostgreSQL уже установлен у вас, либо потому что он включён в вашу операцион-
ную систему, либо его установил системный администратор. Если это так, обратитесь к докумен-
тации по операционной системе или к вашему администратору и узнайте, как получить доступ к
PostgreSQL.
Если же вы не знаете, установлен ли PostgreSQL или можно ли использовать его для эксперимен-
тов, тогда просто установите его сами. Сделать это несложно и это будет хорошим упражнением.
PostgreSQL может установить любой обычный пользователь; права суперпользователя (root) не
требуются.
Если вы устанавливаете PostgreSQL самостоятельно, обратитесь к Главе 16 за инструкциями по
установке, а закончив установку, вернитесь к этому введению. Обязательно прочитайте и выпол-
ните указания по установке соответствующих переменных окружения.
Если ваш администратор выполнил установку не с параметрами по умолчанию, вам может потре-
боваться проделать дополнительную работу. Например, если сервер баз данных установлен на уда-
лённом компьютере, вам нужно будет указать в переменной окружения PGHOST имя этого компью-
тера. Вероятно, также придётся установить переменную окружения PGPORT. То есть, если вы пыта-
етесь запустить клиентское приложение и оно сообщает, что не может подключиться к базе дан-
ных, вы должны обратиться к вашему администратору. Если это вы сами, вам следует обратиться к
документации и убедиться в правильности настройки окружения. Если вы не поняли, о чём здесь
идёт речь, перейдите к следующему разделу.
1.2. Основы архитектуры
Прежде чем продолжить, вы должны разобраться в основах архитектуры системы PostgreSQL. Со-
ставив картину взаимодействия частей PostgreSQL, вы сможете лучше понять материал этой гла-
вы.
Говоря техническим языком, PostgreSQL реализован в архитектуре клиент-сервер. Рабочий сеанс
PostgreSQL включает следующие взаимодействующие процессы (программы):
• Главный серверный процесс, управляющий файлами баз данных, принимающий подключения
клиентских приложений и выполняющий различные запросы клиентов к базам данных. Эта
программа сервера БД называется postgres.
• Клиентское приложение пользователя, желающее выполнять операции в базе данных. Кли-
ентские приложения могут быть очень разнообразными: это может быть текстовая утилита,
графическое приложение, веб-сервер, использующий базу данных для отображения веб-стра-
ниц, или специализированный инструмент для обслуживания БД. Некоторые клиентские при-
ложения поставляются в составе дистрибутива PostgreSQL, однако большинство создают сто-
ронние разработчики.
Как и в других типичных клиент-серверных приложениях, клиент и сервер могут располагаться
на разных компьютерах. В этом случае они взаимодействуют по сети TCP/IP. Важно не забывать
это и понимать, что файлы, доступные на клиентском компьютере, могут быть недоступны (или
доступны только под другим именем) на компьютере-сервере.
Сервер PostgreSQL может обслуживать одновременно несколько подключений клиентов. Для это-
го он запускает («порождает») отдельный процесс для каждого подключения. Можно сказать, что
клиент и серверный процесс общаются, не затрагивая главный процесс postgres. Таким образом,
главный серверный процесс всегда работает и ожидает подключения клиентов, принимая кото-
рые, он организует взаимодействие клиента и отдельного серверного процесса. (Конечно всё это
2Начало
происходит незаметно для пользователя, а эта схема рассматривается здесь только для понима-
ния.)
1.3. Создание базы данных
Первое, как можно проверить, есть ли у вас доступ к серверу баз данных, — это попытаться создать
базу данных. Работающий сервер PostgreSQL может управлять множеством баз данных, что поз-
воляет создавать отдельные базы данных для разных проектов и пользователей.
Возможно, ваш администратор уже создал базу данных для вас. В этом случае вы можете пропу-
стить этот этап и перейти к следующему разделу.
Для создания базы данных, в этом примере названной mydb, выполните следующую команду:
$ createdb mydb
Если вы не увидите никаких сообщений, значит операция была выполнена успешно и продолжение
этого раздела можно пропустить.
Если вы видите сообщение типа:
createdb: command not found
значит PostgreSQL не был установлен правильно. Либо он не установлен вообще, либо в путь по-
иска команд оболочки не включён его каталог. Попробуйте вызвать ту же команду, указав абсо-
лютный путь:
$ /usr/local/pgsql/bin/createdb mydb
У вас этот путь может быть другим. Свяжитесь с вашим администратором или проверьте, как были
выполнены инструкции по установке, чтобы исправить ситуацию.
Ещё один возможный ответ:
createdb: не удалось подключиться к базе postgres:
не удалось подключиться к серверу: No such file or directory
Он действительно работает локально и принимает
соединения через Unix-сокет “/tmp/.s.PGSQL.5432”?
Это означает, что сервер не работает или createdb не может к нему подключиться. И в этом случае
пересмотрите инструкции по установке или обратитесь к администратору.
Также вы можете получить сообщение:
createdb: не удалось подключиться к базе postgres:
ВАЖНО: роль “joe” не существует
где фигурирует ваше имя пользователя. Это говорит о том, что администратор не создал учётную
запись PostgreSQL для вас. (Учётные записи PostgreSQL отличаются от учётных записей пользо-
вателей операционной системы.) Если вы сами являетесь администратором, прочитайте Главу 21,
где написано, как создавать учётные записи. Для создания нового пользователя вы должны стать
пользователем операционной системы, под именем которого был установлен PostgreSQL (обычно
это postgres). Также возможно, что вам назначено имя пользователя PostgreSQL, не совпадающее
с вашим именем в ОС; в этом случае вам нужно явно указать ваше имя пользователя PostgreSQL,
используя ключ -U или установив переменную окружения PGUSER.
Если у вас есть учётная запись пользователя, но нет прав на создание базы данных, вы увидите
сообщение:
createdb: создать базу данных не удалось:
ОШИБКА: нет прав на создание базы данных
Создавать базы данных разрешено не всем пользователям. Если PostgreSQL отказывается созда-
вать базы данных для вас, значит вам необходимо соответствующее разрешение. В этом случае
3Начало
обратитесь к вашему администратору. Если вы устанавливали PostgreSQL сами, то для целей этого
1
введения вы должны войти в систему с именем пользователя, запускающего сервер БД.
Вы также можете создавать базы данных с другими именами. PostgreSQL позволяет создавать
сколько угодно баз данных. Имена баз данных должны начинаться с буквы и быть не длиннее 63
символов. В качестве имени базы данных удобно использовать ваше текущее имя пользователя.
Многие утилиты предполагают такое имя по умолчанию, так что вы сможете упростить ввод ко-
манд. Чтобы создать базу данных с таким именем, просто введите:
$ createdb
Если вы больше не хотите использовать вашу базу данных, вы можете удалить её. Например, ес-
ли вы владелец (создатель) базы данных mydb, вы можете уничтожить её, выполнив следующую
команду:
$ dropdb mydb
(Эта команда не считает именем БД по умолчанию имя текущего пользователя, вы должны явно
указать его.) В результате будут физически удалены все файлы, связанные с базой данных, и так
как отменить это действие нельзя, не выполняйте его, не подумав о последствиях.
Узнать о командах createdb и dropdb больше можно в справке createdb и dropdb.
1.4. Подключение к базе данных
Создав базу данных, вы можете обратиться к ней:
• Запустив терминальную программу PostgreSQL под названием psql, в которой можно интерак-
тивно вводить, редактировать и выполнять команды SQL.
• Используя существующие графические инструменты, например, pgAdmin или офисный пакет
с поддержкой ODBC или JDBC, позволяющий создавать и управлять базой данных. Эти воз-
можности здесь не рассматриваются.
• Написав собственное приложение, используя один из множества доступных языковых интер-
фейсов. Подробнее это рассматривается в Части IV.
Чтобы работать с примерами этого введения, начните с psql. Подключиться с его помощью к базе
данных mydb можно, введя команду:
$ psql mydb
Если имя базы данных не указать, она будет выбрана по имени пользователя. Об этом уже расска-
зывалось в предыдущем разделе, посвящённом команде createdb.
В psql вы увидите следующее сообщение:
psql (11.1)
Type “help” for help.
mydb=&gt;
Последняя строка может выглядеть и так:
mydb=#
Что показывает, что вы являетесь суперпользователем, и так скорее всего будет, если вы уста-
навливали экземпляр PostgreSQL сами. В этом случае на вас не будут распространяться никакие
ограничения доступа, но для целей данного введения это не важно.
Если вы столкнулись с проблемами при запуске psql, вернитесь к предыдущему разделу. Команды
createdb и psql подключаются к серверу одинаково, так что если первая работает, должна рабо-
тать и вторая.
1
Объяснить это поведение можно так: Учётные записи пользователей PostgreSQL отличаются от учётных записей операционной системы. При подключении
к базе данных вы можете указать, с каким именем пользователя PostgreSQL нужно подключаться. По умолчанию же используется имя, с которым вы
зарегистрированы в операционной системе. При этом получается, что в PostgreSQL всегда есть учётная запись с именем, совпадающим с именем системного
пользователя, запускающего сервер, и к тому же этот пользователь всегда имеет права на создание баз данных. И чтобы подключиться с именем этого
пользователя PostgreSQL, необязательно входить с этим именем в систему, достаточно везде передавать его с параметром -U.
4Начало
Последняя строка в выводе psql — это приглашение, которое показывает, что psql ждёт ваших
команд и вы можете вводить SQL-запросы в рабочей среде psql. Попробуйте эти команды:
mydb=&gt; SELECT version();
version
——————————————————————————————
PostgreSQL 11.1 on x86_64-pc-linux-gnu, compiled by gcc (Debian 4.9.2-10) 4.9.2, 64-
bit
(1 row)
mydb=&gt; SELECT current_date;
date
————
2016-01-07
(1 row)
mydb=&gt; SELECT 2 + 2;
?column?
———-
4
(1 row)
В программе psql есть множество внутренних команд, которые не являются SQL-операторами. Они
начинаются с обратной косой черты, «\». Например, вы можете получить справку по различным
SQL-командам PostgreSQL, введя:
mydb=&gt; \h
Чтобы выйти из psql, введите:
mydb=&gt; \q
и psql завершит свою работу, а вы вернётесь в командную оболочку операционной системы. (Что-
бы узнать о внутренних командах, введите \? в приглашении командной строки psql.) Все возмож-
ности psql документированы в справке psql. В этом руководстве мы не будем использовать эти
возможности явно, но вы можете изучить их и применять при удобном случае.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="http://localhost:4000/%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7-%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D0%B8-%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8-%D1%81%D0%B0%D0%B9%D1%82%D0%B0/" title="Анализ скорости загрузки сайта PageSpeed"><img src="http://localhost:4000/images/matrix.jpg" alt="Анализ скорости загрузки сайта PageSpeed"></a>
      </div><!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2018-11-26T00:00:00+02:00"><a href="http://localhost:4000/%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7-%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D0%B8-%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8-%D1%81%D0%B0%D0%B9%D1%82%D0%B0/">November 26, 2018</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Sergey Khatsiola">Sergey Khatsiola</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7-%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D0%B8-%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8-%D1%81%D0%B0%D0%B9%D1%82%D0%B0/" rel="bookmark" title="Анализ скорости загрузки сайта PageSpeed" itemprop="url">Анализ скорости загрузки сайта PageSpeed</a></h1>
    
  </header>
  <div class="entry-content">
    <p>PageSpeed Insights анализирует содержание веб-страницы и предлагает решения, которые позволят ускорить ее загрузку.
Пример анализа <strong><a href="https://developers.google.com/speed/pagespeed/insights/?url=https%3A%2F%2Fblog.fzona.com.ua">blog.fzona.com.ua</a></strong></p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">ссылки</span>
<span class="nt">https</span><span class="o">://</span><span class="nt">developers</span><span class="nc">.google.com</span><span class="o">/</span><span class="nt">speed</span><span class="o">/</span><span class="nt">pagespeed</span><span class="o">/</span><span class="nt">insights</span><span class="o">/</span>
</code></pre></div></div>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="http://localhost:4000/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-PostgreSql-%D0%B8%D0%B7-sources/" title="Устанавливаем PostgreSQL 11 из sources"><img src="http://localhost:4000/images/matrix.jpg" alt="Устанавливаем PostgreSQL 11 из sources"></a>
      </div><!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2018-11-25T00:00:00+02:00"><a href="http://localhost:4000/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-PostgreSql-%D0%B8%D0%B7-sources/">November 25, 2018</a></time></span><span class="author vcard"><span class="fn"><a href="http://localhost:4000/about/" title="About Sergey Khatsiola">Sergey Khatsiola</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://localhost:4000/%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-PostgreSql-%D0%B8%D0%B7-sources/" rel="bookmark" title="Устанавливаем PostgreSQL 11 из sources" itemprop="url">Устанавливаем PostgreSQL 11 из sources</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Загрузка sources из <a href="https://www.postgresql.org/download/">PostgreSQL.org</a> и распаковываем в папку ~/install</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">mkdir</span> <span class="nt">install</span>
<span class="nt">cd</span> <span class="nt">install</span>
<span class="nt">wget</span> <span class="nt">https</span><span class="o">://</span><span class="nt">ftp</span><span class="nc">.postgresql.org</span><span class="o">/</span><span class="nt">pub</span><span class="o">/</span><span class="nt">source</span><span class="o">/</span><span class="nt">v11</span><span class="nc">.1</span><span class="o">/</span><span class="nt">postgresql-11</span><span class="nc">.1.tar.gz</span>
<span class="nt">tar</span> <span class="nt">xzf</span> <span class="nt">postgresql-11</span><span class="nc">.1.tar.gz</span>
<span class="nt">cd</span> <span class="nt">postgresql-11</span><span class="nc">.1</span>
</code></pre></div></div>

<p>Приступаем к установке, в случае ошибки придется установить недостающие библиотеки и инструменты.</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">./</span><span class="nt">configure</span>
<span class="nt">make</span> <span class="nt">world</span>
<span class="nt">make</span> <span class="nt">install</span>
</code></pre></div></div>
<p>По умолчанию система развернется в папке <em>/usr/local/pgsql</em> проверьте наличие файлов</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">ls</span> <span class="nt">-l</span> <span class="o">/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span>
</code></pre></div></div>

<p>Для работы PostgreSQL сервера требуется создать пользователя <em>postgres</em></p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">sudo</span> <span class="nt">useradd</span> <span class="nt">-M</span> <span class="nt">postgres</span>
</code></pre></div></div>

<p>Создаем папку для данных $PGDATA</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">mkdir</span> <span class="o">/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">data</span>
<span class="nt">chown</span> <span class="nt">postgres</span> <span class="o">/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">data</span>
</code></pre></div></div>
<p>Проводим инициализацию базы под пользователем postgres</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">su</span> <span class="nt">-</span> <span class="nt">postgres</span>
<span class="o">/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">initdb</span> <span class="nt">-D</span> <span class="o">/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">data</span>
</code></pre></div></div>

<p>Запускаем демон PostgreSQL</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">postgres</span> <span class="nt">-D</span> <span class="o">/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">data</span> <span class="o">&gt;</span><span class="nt">logfile</span> <span class="nt">2</span><span class="o">&gt;&amp;</span><span class="nt">1</span> <span class="o">&amp;</span>
</code></pre></div></div>

<p>Создаем тестовую базу <em>test</em></p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">createdb</span> <span class="nt">test</span>
<span class="o">/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">psql</span> <span class="nt">test</span>
  <span class="nt">type</span> <span class="nt">for</span> <span class="nt">exit</span> <span class="nt">q</span><span class="err">\</span>
</code></pre></div></div>

<p>Создаем скрипт автоматического запуска сервиса PostgreSQL</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">sudo</span> <span class="nt">touch</span> <span class="o">/</span><span class="nt">etc</span><span class="o">/</span><span class="nt">systemd</span><span class="o">/</span><span class="nt">system</span><span class="o">/</span><span class="nt">postgresql</span><span class="nc">.service</span>
<span class="err">Инаполнение</span> <span class="err">файла</span>
<span class="o">[</span><span class="nt">Unit</span><span class="o">]</span>
<span class="nt">Description</span><span class="o">=</span><span class="nt">PostgreSQL</span> <span class="nt">database</span> <span class="nt">server</span>
<span class="nt">After</span><span class="o">=</span><span class="nt">network</span><span class="nc">.target</span>

<span class="o">[</span><span class="nt">Service</span><span class="o">]</span>
<span class="nt">Type</span><span class="o">=</span><span class="nt">forking</span>

<span class="nt">User</span><span class="o">=</span><span class="nt">postgres</span>
<span class="nt">Group</span><span class="o">=</span><span class="nt">postgres</span>

<span class="err">#</span> <span class="nt">Maximum</span> <span class="nt">number</span> <span class="nt">of</span> <span class="nt">seconds</span> <span class="nt">pg_ctl</span> <span class="nt">will</span> <span class="nt">wait</span> <span class="nt">for</span> <span class="nt">postgres</span> <span class="nt">to</span> <span class="nt">start</span><span class="o">.</span>  <span class="nt">Note</span> <span class="nt">that</span>
<span class="err">#</span> <span class="nt">PGSTARTTIMEOUT</span> <span class="nt">should</span> <span class="nt">be</span> <span class="nt">less</span> <span class="nt">than</span> <span class="nt">TimeoutSec</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">Environment</span><span class="o">=</span><span class="nt">PGSTARTTIMEOUT</span><span class="o">=</span><span class="nt">270</span>

<span class="nt">Environment</span><span class="o">=</span><span class="nt">PGDATA</span><span class="o">=/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">data</span>


<span class="nt">ExecStart</span><span class="o">=/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">pg_ctl</span> <span class="nt">start</span> <span class="nt">-D</span> <span class="err">$</span><span class="p">{</span><span class="err">PGDATA</span><span class="p">}</span> <span class="nt">-s</span> <span class="nt">-w</span> <span class="nt">-t</span> <span class="err">$</span><span class="p">{</span><span class="err">PGSTARTTIMEOUT</span><span class="p">}</span>
<span class="nt">ExecStop</span><span class="o">=/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">pg_ctl</span> <span class="nt">stop</span> <span class="nt">-D</span> <span class="err">$</span><span class="p">{</span><span class="err">PGDATA</span><span class="p">}</span> <span class="nt">-s</span> <span class="nt">-m</span> <span class="nt">fast</span>
<span class="nt">ExecReload</span><span class="o">=/</span><span class="nt">usr</span><span class="o">/</span><span class="nt">local</span><span class="o">/</span><span class="nt">pgsql</span><span class="o">/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">pg_ctl</span> <span class="nt">reload</span> <span class="nt">-D</span> <span class="err">$</span><span class="p">{</span><span class="err">PGDATA</span><span class="p">}</span> <span class="nt">-s</span>

<span class="err">#</span> <span class="nt">Give</span> <span class="nt">a</span> <span class="nt">reasonable</span> <span class="nt">amount</span> <span class="nt">of</span> <span class="nt">time</span> <span class="nt">for</span> <span class="nt">the</span> <span class="nt">server</span> <span class="nt">to</span> <span class="nt">start</span> <span class="nt">up</span><span class="o">/</span><span class="nt">shut</span> <span class="nt">down</span><span class="o">.</span>
<span class="err">#</span> <span class="nt">Ideally</span><span class="o">,</span> <span class="nt">the</span> <span class="nt">timeout</span> <span class="nt">for</span> <span class="nt">starting</span> <span class="nt">PostgreSQL</span> <span class="nt">server</span> <span class="nt">should</span> <span class="nt">be</span> <span class="nt">handled</span> <span class="nt">more</span>
<span class="err">#</span> <span class="nt">nicely</span> <span class="nt">by</span> <span class="nt">pg_ctl</span> <span class="nt">in</span> <span class="nt">ExecStart</span><span class="o">,</span> <span class="nt">so</span> <span class="nt">keep</span> <span class="nt">its</span> <span class="nt">timeout</span> <span class="nt">smaller</span> <span class="nt">than</span> <span class="nt">this</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">TimeoutSec</span><span class="o">=</span><span class="nt">300</span>

<span class="o">[</span><span class="nt">Install</span><span class="o">]</span>
<span class="nt">WantedBy</span><span class="o">=</span><span class="nt">multi-user</span><span class="nc">.target</span>
</code></pre></div></div>

<p>Останавливаем демон PostgreSQL и перезапустим конфигурацию демона systemd:</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">su</span> <span class="nt">postgres</span> <span class="nt">-c</span> <span class="s1">"/usr/local/pgsql/bin/pg_ctl -D /usr/local/pgsql/data/ stop"</span>
<span class="nt">systemctl</span> <span class="nt">daemon-reload</span>
<span class="nt">systemctl</span> <span class="nt">start</span> <span class="nt">postgresql</span>
<span class="nt">systemctl</span> <span class="nt">enable</span> <span class="nt">postgresql</span>
</code></pre></div></div>
<p>Основной файл настроек Postgresql это postgresql.conf, в директории с данными /usr/local/pgsql/data/</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">cat</span> <span class="nt">pg_hba</span><span class="nc">.conf</span>

<span class="err">#</span> <span class="nt">TYPE</span>  <span class="nt">DATABASE</span>        <span class="nt">USER</span>            <span class="nt">ADDRESS</span>                 <span class="nt">METHOD</span>

<span class="err">#</span> <span class="s1">"local"</span> <span class="nt">is</span> <span class="nt">for</span> <span class="nt">Unix</span> <span class="nt">domain</span> <span class="nt">socket</span> <span class="nt">connections</span> <span class="nt">only</span>
<span class="nt">local</span>   <span class="nt">all</span>             <span class="nt">all</span>                                     <span class="nt">trust</span>
<span class="err">#</span> <span class="nt">IPv4</span> <span class="nt">local</span> <span class="nt">connections</span><span class="o">:</span>
<span class="nt">host</span>    <span class="nt">all</span>             <span class="nt">all</span>             <span class="nt">127</span><span class="nc">.0.0.1</span><span class="o">/</span><span class="nt">32</span>            <span class="nt">trust</span>
<span class="err">#</span> <span class="nt">IPv6</span> <span class="nt">local</span> <span class="nt">connections</span><span class="o">:</span>
<span class="nt">host</span>    <span class="nt">all</span>             <span class="nt">all</span>             <span class="nd">::1</span><span class="o">/</span><span class="nt">128</span>                 <span class="nt">trust</span>
<span class="err">#</span> <span class="nt">Allow</span> <span class="nt">replication</span> <span class="nt">connections</span> <span class="nt">from</span> <span class="nt">localhost</span><span class="o">,</span> <span class="nt">by</span> <span class="nt">a</span> <span class="nt">user</span> <span class="nt">with</span> <span class="nt">the</span>
<span class="err">#</span> <span class="nt">replication</span> <span class="nt">privilege</span><span class="o">.</span>
<span class="nt">local</span>   <span class="nt">replication</span>     <span class="nt">all</span>                                     <span class="nt">trust</span>
<span class="nt">host</span>    <span class="nt">replication</span>     <span class="nt">all</span>             <span class="nt">127</span><span class="nc">.0.0.1</span><span class="o">/</span><span class="nt">32</span>            <span class="nt">trust</span>
<span class="nt">host</span>    <span class="nt">replication</span>     <span class="nt">all</span>             <span class="nd">::1</span><span class="o">/</span><span class="nt">128</span>                 <span class="nt">trust</span>
</code></pre></div></div>

<p>Рассмотрим возможные значения столбцов:</p>

<p>Тип подключения:</p>
<ul>
  <li>local - подключение через доменные сокеты Unix;</li>
  <li>host - подключение по TCP/IP;</li>
  <li>hostssl - подключение по TCP/IP с применением шифрования SSL;</li>
  <li>hostnossl - противоположен hostssl, подключение по TCP/IP без шифрования SSL.</li>
</ul>

<p>База данных - определяет к какой базе осуществляется подключение:</p>
<ul>
  <li>Имя конкретной баззы данных;</li>
  <li>all - все базы данных;</li>
  <li>sameuser - определяет, что данная запись соответствует только, если имя запрашиваемой базы данных совпадает с именем запрашиваемого пользователя.</li>
  <li>samerole - определяет, что запрашиваемый пользователь должен быть членом роли с таким же именем, как и у запрашиваемой базы данных.</li>
  <li>Пользователь - учетная запись под которой происходит подключение к базе:</li>
  <li>Конкретное имя пользователя (несколько пользователей через запятую);</li>
  <li>all - любой пользователь;</li>
  <li>знак + перед именем пользователя - подключаемый пользователь имеет отношение к указанной роли;</li>
  <li>знак @ далее идет имя файла содержащего список пользователей.</li>
  <li>Адрес - адрес клиента, с которого происходит подключение:</li>
  <li>ip-адрес/маска (172.20.1.0/24, 172.20.1.1/32);</li>
  <li>all - любой хост;</li>
  <li>samehost - любой адрес данного сервера;</li>
  <li>samenet - любой адрес любой сети, к которой сервер подключен напрямую.</li>
</ul>

<p>Метод аутентификации:</p>
<ul>
  <li>trust - разрешает безусловное подключение;</li>
  <li>reject - отклоняет подключение;</li>
  <li>md5 - требует от клиента предоставить пароль;</li>
  <li>password - требуется для аутентификации клиентом с вводом незашифрованного пароля;</li>
  <li>ident - получает имя пользователя операционной системы клиента, связываясь с сервером Ident, и проверяет, соответствует ли оно имени пользователя базы данных. Аутентификация ident может использоваться только для подключений по TCP/IP;</li>
  <li>peer - получает имя пользователя операционной системы клиента из операционной системы и проверяет, соответствует ли оно имени пользователя запрашиваемой базы данных. Доступно только для локальных подключений;</li>
  <li>ldap - аутентификация с помощью сервера LDAP;</li>
  <li>radius - аутентификация с помощью сервера Radius;</li>
  <li>cert - аутентификация с помощью сертификата;</li>
  <li>pam - аутентификация с помощью службы подключаемых модулей аутентификации (PAM).</li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="http://localhost:4000/page26/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="http://localhost:4000">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="http://localhost:4000/page25/">25</a></li>
      
    
      
        
        
        
        <li><a href="http://localhost:4000/page26/">26</a></li>
      
    
      
        <li><strong class="current-page">27</strong></li>
      
    
      
        
        
        
        <li><a href="http://localhost:4000/page28/">28</a></li>
      
    
      
        
        
        
        <li><a href="http://localhost:4000/page29/">29</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="http://localhost:4000/page36/">36</a></li>
    

    
    
      <li><a href="http://localhost:4000/page28/" class="btn">Next</a></li>
    
  </ul>
</div>

</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2019 Sergey Khatsiola. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-130427752-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


          

</body>
</html>